# ~/.zsh_scriptlets
# Small scripts to make my life easier

function please() {
  # grab the previous command
  local last_cmd
  last_cmd=$(fc -ln -1)

  # let ‚Äôem know what‚Äôs up
  echo "üôè sudo $last_cmd"

  # actually run it
  eval "sudo $last_cmd"
}

function omp-theme() {
  if [[ -z "$1" ]]; then
    echo "Usage: omp-theme <theme>"
    return 1
  fi
  local newtheme="$1"
  # Update the OMPTHEME variable in .zshrc (using GNU sed; on macOS, use: sed -i '' ...)
  sed -i "s/^export OMPTHEME=.*/export OMPTHEME=${newtheme}/" ~/.zshrc
  # Update the current session
  export OMPTHEME=${newtheme}
  # Reinitialize oh‚Äëmy‚Äëposh with the new theme
  eval "$(oh-my-posh init zsh --config $HOME/.oh-my-posh/themes/${newtheme}.omp.json)"
  echo "OMP theme switched to ${newtheme}."
}

function mkcd() {
  mkdir -p -- "$1" && cd -P -- "$1"
}

function extract() {
  [[ -f $1 ]] || { echo "No such file: $1"; return 1 }
  case $1 in
    *.tar.bz2)   tar xjf "$1"    ;;
    *.tar.gz)    tar xzf "$1"    ;;
    *.tar.xz)    tar xJf "$1"    ;;
    *.tbz2)      tar xjf "$1"    ;;
    *.tgz)       tar xzf "$1"    ;;
    *.zip)       unzip "$1"      ;;
    *.rar)       unrar x "$1"    ;;
    *.7z)        7z x "$1"       ;;
    *)           echo "Can‚Äôt extract '$1'‚Ä¶" ;;
  esac
}

